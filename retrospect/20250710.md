## 리뷰

---

**오늘 할 일**

- W1M3 추가 요구 사항 구현
    - GDP 산정 데이터를 Sqlite에 삽입 및 SQL질의 결과 출력
- W1M1, W1M3 팀 활동

**오늘 한 일**

웹에서 데이터를 추출하여 데이터 프레임으로 변환할 때, 각 데이터를 행으로 추가해야 한다.

pandas에서 행을 추가할 때 방법은 `append`, `loc`, `concat` 을 사용할 수 있다. 이 중 `append`는 최신 pandas 버전에서는 지원하지 않는다. 

1.  `concat` 
    
    각 문서를 추출할 때 별도의 데이터프레임을 만들고, 최종적으로 하나의 데이터프레임으로 `concat`하는 방식
    
    하지만 나라별 지역을 구분할 때, 특정 나라는 여러 지역에 속하는 것을 확인하였고, 이때 같은 데이터가 두 번 이상 나오게 된다.
    
    ex) India는 commonwealth 에도 들어가고 asia에도 들어감. 
    
2. `loc` 
    
    나라 이름을 인덱스로 놓고, GDP와 지역 정보를 삽입. 이때 지역은 리스트로 묶고, 그룹화를 할 때만 `explode` 메서드를 사용하여 처리.
    

RDB에서 각 요소는 원자성을 가져야 함. 나라가 여러 개의 Region을 가질 수 있기 때문에, 테이블을 분리할 필요가 있다고 판단.

**WorldEconomies**

- Country: Str
- GDP: Float

**CountryByRegion**

- Country: Str (Foreign Key)
- Region: Str

두 테이블을 JOIN하여 연산 수행

### W1M1 팀 활동

**경제적 가치**

- **차량 연비 예측 모델:** 일정 수치의 연비 차량을 제작하기 위해서, 어떠한 조합을 사용할 수 있을지
    - 종속 변수: 연비
    - 독립 변수: 배기량, 실린더 수, 마력, …
    - 회귀 모델을 작성 후, 어떤 독립 변수 조합으로 목표 치의 연비를 달성할 수 있는지
    - 실제 실험에서는 비용이 높으므로 AI모델을 통해 실험 비용 절감 (경제적 가치)
- **보험료 측정**: 차의 특징 별로 보험료를 다르게 책정
    - 마력, 출력 등이 높은 차는 사고날 확률이 더 높다 (구체적인 지표 필요 - 가정)

**분석 결과**

- 실린더 수가 많을수록 배기량이 높아지고, 무게가 클수록 배기량이 높아진다. (양의 상관관계)
- 배기량이 클수록 출력이 커진다.
- 출력이 클수록 연비는 나빠진다.

<aside>
💡(실린더 수, 무게)와 연비는 반비례 한다.

</aside>

### W1M3 팀 활동

**IMF 홈페이지에서 직접 데이터 추출**

- 공식 IMF 데이터 포털: https://data.imf.org/en/datasets/IMF.RES:WEO
- Indicator 설정에서 `GDP, US dollars` 항목을 선택
- 원하는 국가, 연도 등을 필터링한 후 CSV 형식으로 다운로드 가능

**데이터가 갱신 시 과거 데이터**

기존에 구현한 ETL 로직은 새 데이터를 수집하면 과거 데이터를 덮어씌우는 방식으로 동작 

→ 데이터의 시계열 추적을 위해 과거 데이터는 필요함

**개선 방향**

- 테이블 기존 구조: index=Country, 컬럼에 최신 GDP만 존재
- Country index 대신 자동 생성 고유 ID 사용(INTEGER PRIMARY KEY)
- 컬럼 구성: Country, GDP, Date

ETL 수행 시점의 날짜를 함께 저장 (Date 필드)

각 국가의 GDP를 별도 Row로 기록

예: 같은 국가라도 2023-10-01, 2024-04-01 등 날짜별로 데이터 보존

---

## 회고

### Keep

- 꼭 그룹 세션 시간이 아니더라도 중간중간 팀원들과 소통하며 코드 레벨 및 문제 접근 방식을 공유함으로써 문제에서 놓쳤던 부분을 캐치하거나 다양한 풀이법을 알 수 있었습니다.
    - 놓쳤던 부분: 한 개의 나라가 두 개 이상의 Region을 가질 수 있다는 점
    - 팀원들의 다양한 풀이법: 통합된 테이블 한 개만 추출하고, Region 페이지에서는 국가 리스트만 추출하여 추출한 데이터 프레임과 매핑하는 방식.
- 기능 단위로 구현을 마칠 때마다 주석을 상세히 달았음.
    - 현재 진행 상황을 한눈에 파악할 수 있었음
    - 팀원들과 코드 레벨을 공유할 때, 팀원들이 이해하기 쉬웠음

### Problem

- 오류를 해결하기 위해 다양한 자료를 찾아봐도 해결이 되지 않자 GPT의 도움을 받았더니 오타에서 발생한 문제. 코드를 다시 제대로 보지 않고 오류가 발생한 부분의 문법과 오류 코드를 우선적으로 검색한 잘못된 습관에서 비롯.
    - 오류 발생 시 무턱대고 자료를 찾기 전에 차분한 마음으로 코드를 검토해보기.

### Try

- 복잡한 서브 쿼리 질의는 한번에 생각해내기 어렵기 때문에, 종이나 그림판을 사용하여 각 단계 별로 구분하여 생각해보기
